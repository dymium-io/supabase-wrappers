
./Setup.hs,15
main main1,2

./app/Config.hs,6323
module ConfigConfig3,4
class HasRootDirectory HasRootDirectory39,40
class HasRootDirectory a where rootDirectory rootDirectory39,40
class HasPostgreSettings HasPostgreSettings40,41
class HasPostgreSettings a where postgreSettings postgreSettings40,41
class HasPostgreSchema HasPostgreSchema41,42
class HasPostgreSchema a where postgreSchema postgreSchema41,42
data OptsMigrateOptsMigrate43,44
    = OptsMigrateOptsMigrate44,45
        { _omigratePostgreSchema _omigratePostgreSchema45,46
        , _omigrateRootDirectory _omigrateRootDirectory46,47
        , _omigrateApply _omigrateApply47,48
        , _omigrateRunTests _omigrateRunTests48,49
        , _omigratePostgreSettings _omigratePostgreSettings49,50
instance HasRootDirectory HasRootDirectory OptsMigrate55,56
instance HasRootDirectory OptsMigrate where rootDirectory rootDirectory55,56
instance HasPostgreSettings HasPostgreSettings OptsMigrate56,57
instance HasPostgreSettings OptsMigrate where postgreSettings postgreSettings56,57
instance HasPostgreSchema HasPostgreSchema OptsMigrate57,58
instance HasPostgreSchema OptsMigrate where postgreSchema postgreSchema57,58
runTestsFlag runTestsFlag59,60
applyFlag applyFlag62,63
data OptsConfirmChecksumsOptsConfirmChecksums67,68
    = OptsConfirmChecksumsOptsConfirmChecksums68,69
        { _oconfirmPostgreSchema _oconfirmPostgreSchema69,70
        , _oconfirmRootDirectory _oconfirmRootDirectory70,71
        , _oconfirmPostgreSettings _oconfirmPostgreSettings71,72
instance HasRootDirectory HasRootDirectory OptsConfirmChecksums77,78
instance HasRootDirectory OptsConfirmChecksums where rootDirectory rootDirectory77,78
instance HasPostgreSettings HasPostgreSettings OptsConfirmChecksums78,79
instance HasPostgreSettings OptsConfirmChecksums where postgreSettings postgreSettings78,79
instance HasPostgreSchema HasPostgreSchema OptsConfirmChecksums79,80
instance HasPostgreSchema OptsConfirmChecksums where postgreSchema postgreSchema79,80
data OptsRepairChecksumOptsRepairChecksum83,84
    = OptsRepairChecksumOptsRepairChecksum84,85
        { _orepairRootDirectory _orepairRootDirectory85,86
        , _orepairMigrationName _orepairMigrationName86,87
        , _orepairPostgreSettings _orepairPostgreSettings87,88
instance HasRootDirectory HasRootDirectory OptsRepairChecksum93,94
instance HasRootDirectory OptsRepairChecksum where rootDirectory rootDirectory93,94
instance HasPostgreSettings HasPostgreSettings OptsRepairChecksum94,95
instance HasPostgreSettings OptsRepairChecksum where postgreSettings postgreSettings94,95
migrationName migrationName96,97
data OptsRegisterMigrationsOptsRegisterMigrations101,102
    = OptsRegisterMigrationsOptsRegisterMigrations102,103
        { _oregisterPostgreSchema _oregisterPostgreSchema103,104
        , _oregisterRootDirectory _oregisterRootDirectory104,105
        , _oregisterPostgreSettings _oregisterPostgreSettings105,106
        , _oregisterMigrations _oregisterMigrations106,107
instance HasRootDirectory HasRootDirectory OptsRegisterMigrations112,113
instance HasRootDirectory OptsRegisterMigrations where rootDirectory rootDirectory112,113
instance HasPostgreSettings HasPostgreSettings OptsRegisterMigrations113,114
instance HasPostgreSettings OptsRegisterMigrations where postgreSettings postgreSettings113,114
instance HasPostgreSchema HasPostgreSchema OptsRegisterMigrations114,115
instance HasPostgreSchema OptsRegisterMigrations where postgreSchema postgreSchema114,115
registerMigrations registerMigrations116,117
data OptsUnregisterMigrationsOptsUnregisterMigrations121,122
    = OptsUnregisterMigrationsOptsUnregisterMigrations122,123
        { _ounregisterPostgreSchema _ounregisterPostgreSchema123,124
        , _ounregisterPostgreSettings _ounregisterPostgreSettings124,125
        , _ounregisterMigrations _ounregisterMigrations125,126
instance HasPostgreSettings HasPostgreSettings OptsUnregisterMigrations131,132
instance HasPostgreSettings OptsUnregisterMigrations where postgreSettings postgreSettings131,132
instance HasPostgreSchema HasPostgreSchema OptsUnregisterMigrations132,133
instance HasPostgreSchema OptsUnregisterMigrations where postgreSchema postgreSchema132,133
unregisterMigrations unregisterMigrations134,135
data OptsDropSchemaOptsDropSchema139,140
    = OptsDropSchemaOptsDropSchema140,141
        { _odropPostgreSchema _odropPostgreSchema141,142
        , _odropPostgreSettings _odropPostgreSettings142,143
instance HasPostgreSettings HasPostgreSettings OptsDropSchema148,149
instance HasPostgreSettings OptsDropSchema where postgreSettings postgreSettings148,149
instance HasPostgreSchema HasPostgreSchema OptsDropSchema149,150
instance HasPostgreSchema OptsDropSchema where postgreSchema postgreSchema149,150
data OptsVersionOptsVersion153,154
    = OptsVersionOptsVersion154,155
data CommandCommand157,158
    = CmdMigrate CmdMigrate158,159
    | CmdDropSchema CmdDropSchema159,160
    | CmdConfirmChecksums CmdConfirmChecksums160,161
    | CmdRepairChecksum CmdRepairChecksum161,162
    | CmdRegisterMigrations CmdRegisterMigrations162,163
    | CmdUnregisterMigrations CmdUnregisterMigrations163,164
    | CmdVersion CmdVersion164,165
configParser configParser167,168
commandParser commandParser172,173
infoMigrateParser infoMigrateParser183,184
cmdMigrateParser cmdMigrateParser187,188
infoDropSchemaParser infoDropSchemaParser197,198
cmdDropSchemaParser cmdDropSchemaParser201,202
infoConfirmChecksumsParser infoConfirmChecksumsParser208,209
cmdConfirmChecksumsParser cmdConfirmChecksumsParser212,213
infoHackParser infoHackParser220,221
cmdHackParser cmdHackParser224,225
infoRepairChecksumParser infoRepairChecksumParser232,233
cmdRepairChecksumParser cmdRepairChecksumParser236,237
infoRegisterMigrationsParser infoRegisterMigrationsParser244,245
cmdRegisterMigrationsParser cmdRegisterMigrationsParser248,249
infoUnregisterMigrationsParser infoUnregisterMigrationsParser269,270
cmdUnregisterMigrationsParser cmdUnregisterMigrationsParser273,274
rootArgument rootArgument293,294
schemaArgument schemaArgument297,298
infoVersionParser infoVersionParser309,310
cmdVersionParser cmdVersionParser313,314

./app/Mallard.hs,597
module Main Main6,7
newtype AppStateAppState26,27
        { _statePostgreConnection _statePostgreConnection28,29
instance HasPostgreConnection HasPostgreConnection AppState33,34
instance HasPostgreConnection AppState where postgreConnection postgreConnection33,34
main main37,38
mainVersion mainVersion49,50
mainMigrate mainMigrate54,55
mainDropSchema mainDropSchema69,70
mainConfirmChecksums mainConfirmChecksums79,80
mainRepairChecksum mainRepairChecksum90,91
mainRegisterMigrations mainRegisterMigrations99,100
mainUnregisterMigrations mainUnregisterMigrations112,113

./test/Test/Integration.hs,226
module Test.Integration Test.Integration3,4
tests tests18,19
openContactDB openContactDB23,24
closeDB closeDB35,36
testContactDeploy testContactDeploy43,44
insertPerson insertPerson65,66
getPerson getPerson76,77

./test/Test.hs,15
main main3,4

./lib/Database/Mallard/Postgre.hs,1426
module Database.Mallard.PostgreDatabase.Mallard.Postgre6,7
class HasPostgreConnection HasPostgreConnection51,52
    postgreConnection postgreConnection52,53
class HasPostgreSchema HasPostgreSchema53,54
    postgreSchema postgreSchema54,55
data MigrationSchemaVersionMigrationSchemaVersion57,58
    = NotInitNotInit58,59
    | MigrationVersion MigrationVersion59,60
instance Ord Ord MigrationSchemaVersion62,63
    compare compare63,64
ensureMigratonSchema ensureMigratonSchema68,69
ensureSchema ensureSchema79,80
runDB runDB88,89
getAppliedMigration getAppliedMigration125,126
getAppliedMigrations getAppliedMigrations139,140
toMigration toMigration149,150
applyMigrations applyMigrations160,161
applyMigration applyMigration163,164
pUnregisterMigrations pUnregisterMigrations200,201
pUnregisterMigration pUnregisterMigration203,204
dropSchema dropSchema213,214
runTests runTests230,231
runTest runTest233,234
applyMigrationSchemaMigraiton applyMigrationSchemaMigraiton241,242
getMigrationSchemaVersion getMigrationSchemaVersion251,252
isMigrationVersionZero isMigrationVersionZero263,264
setChecksum setChecksum272,273
data DigestSizeMismatchExceptionDigestSizeMismatchException280,281
    = DigestSizeMismatchExceptionDigestSizeMismatchException281,282
instance Exception Exception DigestSizeMismatchException284,285
    displayException displayException285,286

./lib/Database/Mallard/File.hs,236
module Database.Mallard.FileDatabase.Mallard.File3,4
scanDirectoryForFiles scanDirectoryForFiles21,22
importDirectory importDirectory24,25
importFile importFile30,31
sortActions sortActions33,34
importFile' importFile'39,40

./lib/Database/Mallard/Parser.hs,1219
module Database.Mallard.ParserDatabase.Mallard.Parser8,9
data ActionAction32,33
    = ActionMigration ActionMigration33,34
    | ActionTest ActionTest34,35
type Description Description36,37
type Requires Requires37,38
data FieldValueFieldValue39,40
    = TextField TextField40,41
    | ListField ListField41,42
type Parser Parser43,44
spaceConsumer spaceConsumer47,48
symbol symbol52,53
symbol' symbol'55,56
brackets brackets58,59
comma comma61,62
colon colon64,65
semiColon semiColon67,68
migrationS migrationS70,71
testS testS73,74
sbang sbang76,77
sbangOrEof sbangOrEof79,80
atom atom82,83
parseActions parseActions90,91
parseTest parseTest98,99
parseTestHeader parseTestHeader108,109
parseMigration parseMigration122,123
parseMigrationHeader parseMigrationHeader141,142
parseFieldValue parseFieldValue159,160
parseHeaderFields parseHeaderFields165,166
parseQuotedText parseQuotedText175,176
data ParserExceptionParserException181,182
    = ParserExceptionParserException182,183
        { _peFile _peFile183,184
        , _peError _peError184,185
instance Exception Exception ParserException188,189
    displayException displayException189,190

./lib/Database/Mallard/Validation.hs,1478
module Database.Mallard.ValidationDatabase.Mallard.Validation5,6
validateAppliedMigrations validateAppliedMigrations24,25
validateAppliedMigration validateAppliedMigration27,28
checkAppliedMigrations checkAppliedMigrations41,42
checkAppliedMigration checkAppliedMigration44,45
data DigestComparisonDigestComparison55,56
    = DigestComparisonDigestComparison56,57
        { _dcPlannedMigrationName _dcPlannedMigrationName57,58
        , _dcPlannedMigrationChecksum _dcPlannedMigrationChecksum58,59
        , _dcAppliedMigrationName _dcAppliedMigrationName59,60
        , _dcAppliedMigrationChecksum _dcAppliedMigrationChecksum60,61
        , _dcChecksumsMatch _dcChecksumsMatch61,62
newtype AppliedMigrationMissingExceptionAppliedMigrationMissingException66,67
        { _ammeAppliedMigrationName _ammeAppliedMigrationName68,69
instance Exception Exception AppliedMigrationMissingException72,73
    displayException displayException73,74
data DigestMismatchExceptionDigestMismatchException79,80
    = DigestMismatchExceptionDigestMismatchException80,81
        { _dmePlannedMigrationName _dmePlannedMigrationName81,82
        , _dmePlannedMigrationChecksum _dmePlannedMigrationChecksum82,83
        , _dmeAppliedMigrationName _dmeAppliedMigrationName83,84
        , _dmeAppliedMigrationChecksum _dmeAppliedMigrationChecksum84,85
instance Exception Exception DigestMismatchException88,89
    displayException displayException89,90

./lib/Database/Mallard/Commands/ConfirmChecksums.hs,606
module Database.Mallard.Commands.ConfirmChecksumsDatabase.Mallard.Commands.ConfirmChecksums5,6
data AppStateAppState20,21
    = AppStateAppState21,22
        { _statePool _statePool22,23
        , _stateSchema _stateSchema23,24
instance HasPostgreConnection HasPostgreConnection AppState28,29
instance HasPostgreConnection AppState where postgreConnection postgreConnection28,29
instance HasPostgreSchema HasPostgreSchema AppState29,30
instance HasPostgreSchema AppState where postgreSchema postgreSchema29,30
confirmChecksums confirmChecksums39,40
showComparison showComparison50,51

./lib/Database/Mallard/Commands/Drop.hs,649
module Database.Mallard.Commands.DropDatabase.Mallard.Commands.Drop5,6
data AppStateAppState18,19
    = AppStateAppState19,20
        { _statePool _statePool20,21
        , _appPostgreSchema _appPostgreSchema21,22
instance Database.Mallard.HasPostgreConnection Database-Mallard-HasPostgreConnection AppState26,27
instance Database.Mallard.HasPostgreConnection AppState where postgreConnection postgreConnection26,27
instance Database.Mallard.HasPostgreSchema Database-Mallard-HasPostgreSchema AppState27,28
instance Database.Mallard.HasPostgreSchema     AppState where postgreSchema postgreSchema27,28
dropSchema dropSchema35,36

./lib/Database/Mallard/Commands/Migrate.hs,533
module Database.Mallard.Commands.MigrateDatabase.Mallard.Commands.Migrate5,6
data AppStateAppState23,24
    = AppStateAppState24,25
        { _statePool _statePool25,26
        , _stateSchema _stateSchema26,27
instance HasPostgreConnection HasPostgreConnection AppState31,32
instance HasPostgreConnection AppState where postgreConnection postgreConnection31,32
instance HasPostgreSchema HasPostgreSchema AppState32,33
instance HasPostgreSchema AppState where postgreSchema postgreSchema32,33
migrate migrate43,44

./lib/Database/Mallard/Commands/RegisterMigrations.hs,1182
module Database.Mallard.Commands.RegisterMigrationsDatabase.Mallard.Commands.RegisterMigrations8,9
data AppStateAppState27,28
    = AppStateAppState28,29
        { _statePool _statePool29,30
        , _stateSchema _stateSchema30,31
instance HasPostgreConnection HasPostgreConnection AppState35,36
instance HasPostgreConnection AppState where postgreConnection postgreConnection35,36
instance HasPostgreSchema HasPostgreSchema AppState36,37
instance HasPostgreSchema AppState where postgreSchema postgreSchema36,37
data DependentMigrationMissingExceptionDependentMigrationMissingException39,40
  = DependentMigrationMissingExceptionDependentMigrationMissingException40,41
      { _dmmeMigrationName _dmmeMigrationName41,42
      , _dmmeDependsOn _dmmeDependsOn42,43
instance Exception Exception DependentMigrationMissingException46,47
    displayException displayException47,48
newtype DuplicateMigrationExceptionDuplicateMigrationException51,52
      { _dmeMigrationName _dmeMigrationName53,54
instance Exception Exception DuplicateMigrationException57,58
    displayException displayException58,59
registerMigrations registerMigrations71,72

./lib/Database/Mallard/Commands/UnregisterMigrations.hs,1145
module Database.Mallard.Commands.UnregisterMigrationsDatabase.Mallard.Commands.UnregisterMigrations8,9
data AppStateAppState25,26
    = AppStateAppState26,27
        { _statePool _statePool27,28
        , _stateSchema _stateSchema28,29
instance HasPostgreConnection HasPostgreConnection AppState33,34
instance HasPostgreConnection AppState where postgreConnection postgreConnection33,34
instance HasPostgreSchema HasPostgreSchema AppState34,35
instance HasPostgreSchema AppState where postgreSchema postgreSchema34,35
data DependentMigrationExceptionDependentMigrationException37,38
  = DependentMigrationExceptionDependentMigrationException38,39
      { _dmeMigrationName _dmeMigrationName39,40
      , _dmeDependsOn _dmeDependsOn40,41
instance Exception Exception DependentMigrationException44,45
    displayException displayException45,46
newtype MissingMigrationExceptionMissingMigrationException49,50
      { _mmeMigrationName _mmeMigrationName51,52
instance Exception Exception MissingMigrationException55,56
    displayException displayException56,57
unregisterMigrations unregisterMigrations68,69

./lib/Database/Mallard/Commands/RepairChecksum.hs,356
module Database.Mallard.Commands.RepairChecksumDatabase.Mallard.Commands.RepairChecksum5,6
newtype AppStateAppState20,21
        { _statePool _statePool22,23
instance HasPostgreConnection HasPostgreConnection AppState27,28
instance HasPostgreConnection AppState where postgreConnection postgreConnection27,28
repairChecksum repairChecksum37,38

./lib/Database/Mallard/Types.hs,1211
module Database.Mallard.Types Database.Mallard.Types3,4
type MigrationTable MigrationTable17,18
inflateMigrationIds inflateMigrationIds19,20
newtype MigrationMissingFromTableMigrationMissingFromTable27,28
instance Exception Exception MigrationMissingFromTable31,32
newtype MigrationId MigrationId33,34
newtype MigrationId = MigrationId { unMigrationId unMigrationId33,34
instance Show Show MigrationId36,37
    show show37,38
type MigrationDigest MigrationDigest39,40
data MigrationMigration41,42
    = MigrationMigration42,43
        { _migrationName _migrationName43,44
        , _migrationDescription _migrationDescription44,45
        , _migrationRequires _migrationRequires45,46
        , _migrationChecksum _migrationChecksum46,47
        , _migrationScript _migrationScript47,48
type TestTable TestTable53,54
newtype TestId TestId55,56
newtype TestId = TestId { unTestId unTestId55,56
instance Show Show TestId58,59
    show show59,60
data TestTest61,62
    = TestTest62,63
        { _testName _testName63,64
        , _testDescription _testDescription64,65
        , _testScript _testScript65,66
scriptsMigrationSchema scriptsMigrationSchema70,71

./lib/Database/Mallard/Graph.hs,309
module Database.Mallard.GraphDatabase.Mallard.Graph3,4
data MigrationGraphMigrationGraph20,21
    = MigrationGraph MigrationGraph21,22
emptyMigrationGraph emptyMigrationGraph23,24
mkMigrationGraph mkMigrationGraph27,28
hasCircle hasCircle45,46
getUnappliedMigrations getUnappliedMigrations48,49

./lib/Database/Mallard.hs,45
module Database.MallardDatabase.Mallard0,1
