#!/bin/bash

set -e

d=$(dirname $0)

if [ "${OSTYPE:0:6}" = "darwin" ]
then
    if ! command -v zstd &> /dev/null
    then
	echo "Please install [zstd] (un)compression tool"
	echo "For example:"
	echo "  brew install zstd"
	exit 255
    fi
    binary="${d}/darwin/dataTypesGenerator"
    rm -f "$binary"
    zstd -d -q -o "${binary}" "${binary}.zst"
else
    binary="${d}/linux/dataTypesGenerator"
fi

${binary} "$@"
